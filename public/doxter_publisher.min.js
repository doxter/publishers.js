!function(){"use strict";function DoxterDownloader(){this.doxterApiUrl="http://localhost:3000/api/publishers/v1/doctors/next_availabilities.json"}DoxterDownloader.prototype.getInsertedValue=function(content,value){var result;if(void 0!==value){var filter_result=content.filter(function(doctor){return void 0!==doctor[value]});void 0!==filter_result&&void 0!==filter_result[0]&&(result=filter_result[0][value])}return result},DoxterDownloader.prototype.insertDoctorsContent=function(content){var elements=this.getAllDoctorsDivs();for(var element in elements){var doctor_attributes=elements[element].attributes;if(void 0!=doctor_attributes){var doctor_id=doctor_attributes.getNamedItem("data-doxter-id");if(void 0!=doctor_id){var value=doctor_id.value,result=this.getInsertedValue(content.doctors_ids,value);void 0!=result&&(elements[element].innerHTML=result)}}}},DoxterDownloader.prototype.getAllDoctorsDivs=function(){var allDoctorsDivs=document.querySelectorAll("[data-doxter-id]");return allDoctorsDivs},DoxterDownloader.prototype.serialize=function(obj){var result="";return Object.keys(obj).map(function(k){obj[k].forEach(function(element,index,array){var parameter=encodeURIComponent(k)+"[]="+element;result=result.concat(parameter),index!==array.length-1&&(result=result.concat("&"))})}),result},DoxterDownloader.prototype.prepareDataForSend=function(data_divs){for(var doctors_json={},doctor_ids=[],i=0;i<data_divs.length;i++)doctor_ids[i]=data_divs[i].getAttribute("data-doxter-id");return doctors_json.doctors_ids=doctor_ids,this.serialize(doctors_json)},DoxterDownloader.prototype.onDataArrived=function(result){null!=result&&void 0!=result&&this.insertDoctorsContent(result)},window.addEventListener("load",function(){var seed=+new Date,_instance=new DoxterDownloader,script=document.createElement("script"),allDoctorsDivs=_instance.getAllDoctorsDivs(),data=_instance.prepareDataForSend(allDoctorsDivs),aid=document.getElementById("doxterPublisherDownloader").getAttribute("data-aid"),aid_params="";void 0!==aid&&(aid_params="&aid="+aid),window["doxter_instance_"+seed]=_instance.onDataArrived.bind(_instance),script.type="text/javascript",script.src=_instance.doxterApiUrl+"?callback=window.doxter_instance_"+seed+"&"+data+aid_params,document.body.appendChild(script)})}();
